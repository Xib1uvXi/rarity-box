# Rarity App Backend Http API

## 获取 Address下的Summoners

Request：

```text
HTTP请求

类型: GET

URL：/summoners/{address}

例子： /summoners/0x6D81145629f154dBf07fDAb18D2892818626FeCF

```

Responses：

```json
{
  "result": [
    {
      "ID": 0,
      "CreatedAt": "0001-01-01T00:00:00Z",
      "UpdatedAt": "0001-01-01T00:00:00Z",
      "DeletedAt": null,
      "address": "0x6d81145629f154dbf07fdab18d2892818626fecf",
      "token_id": 2063971,
      "class_id": "8",
      "level": "2",
      "xp": "2000000000000000000000",
      "next_level_xp": "3000000000000000000000",
      "gold": "1000000000000000000000",
      "gold_claimable": "0",
      "adventure_log": "1634149062",
      "dungeon_log": "0",
      "dungeon_scout": "0",
      "strength": 8,
      "dexterity": 18,
      "constitution": 15,
      "intelligence": 8,
      "wisdom": 15,
      "charisma": 8
    }
  ],
  "success": true
}
```

### 特殊说明

在Responses result 中 adventure_log & dungeon_log 可以判断是否是可以进行可冒险、可地牢

```js
if dayjs(new Date(adventure_log * 1000)).isBefore(dayjs(new Date())) {
    // 可冒险
}


if dayjs(new Date(dungeon_log * 1000)).isBefore(dayjs(new Date())) {
    // 可地牢
}
```

## 获取 Address 可以批量跑的任务数量

Request：

```text
HTTP请求

类型: GET

URL：/task/{address}

例子： /tasks/0x6D81145629f154dBf07fDAb18D2892818626FeCF

```

Responses：

```json
{
  "result": [
    {
      "task_type": "levelup",
      "ids": [],
      "count": 0
    },
    {
      "task_type": "goldclaim",
      "ids": [],
      "count": 0
    },
    {
      "task_type": "adventure",
      "ids": [],
      "count": 306
    },
    {
      "task_type": "dungeon",
      "ids": [],
      "count": 286
    }
  ],
  "success": true
}
```

### 特殊说明

Responses result 中 ids 不需要理会

暂时支持这4个批量任务，召唤&加点后续再加

## 判断用户是否给Caller进行授权(SetApprovedForAll权限)

Request：

```text
HTTP请求

类型: POST

URL：/approve/check

例子： 

{
    "address":"0x6D81145629f154dBf07fDAb18D2892818626FeCF"
}

```

Responses：

```json
{
  "result": true,
  "success": true
}
```

## 获取SetApprovedForAll 交易Input（tx data & param）

Request：

```text
HTTP请求

类型: GET

URL：/tx/approve

```

Responses：

```json
{
  "result": {
    "to": "0xce761D788DF608BD21bdd59d6f4B54b2e27F25Bb",
    "value": "0",
    "input": "0xa22cb4650000000000000000000000003b8d1f9569ec2b8c3dd76847b944bb1b0c998a380000000000000000000000000000000000000000000000000000000000000001"
  },
  "success": true
}
```

### 特殊说明

Responses result 中的input 就是js 构建tx时所需要的data, 只需要``hex decode``就行了

## 执行批量任务

Request：

```text
HTTP请求

类型: POST

URL：/tx/task/run

例子： 

{
    "address": "0x6D81145629f154dBf07fDAb18D2892818626FeCF",
    "task_type": "adventure"
}

task_type:

- adventure
- levelup
- goldclaim
- dungeon

```

Responses：

```json
{
  "result": [
    {
      "to": "0x3B8d1f9569ec2B8C3dD76847B944bB1b0c998A38",
      "value": "249469637795875008",
      "input": "0x3a091650000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000fa00000000000000000000000000000000000000000000000000000000002c17ad00000000000000000000000000000000000000000000000000000000002c33af00000000000000000000000000000000000000000000000000000000002c33b300000000000000000000000000000000000000000000000000000000002aad6a00000000000000000000000000000000000000000000000000000000002c33a500000000000000000000000000000000000000000000000000000000002c33b400000000000000000000000000000000000000000000000000000000001f7e6300000000000000000000000000000000000000000000000000000000002c2fd400000000000000000000000000000000000000000000000000000000002c2fd3000000000000000000000000000000000000000000000000000000000021ea2400000000000000000000000000000000000000000000000000000000002c33a800000000000000000000000000000000000000000000000000000000002b5c1200000000000000000000000000000000000000000000000000000000002c2fd80000000000000000000000000000000000000000000000000000000000368c8100000000000000000000000000000000000000000000000000000000002b5bb300000000000000000000000000000000000000000000000000000000002c33b500000000000000000000000000000000000000000000000000000000002c33ac0000000000000000000000000000000000000000000000000000000000368c8000000000000000000000000000000000000000000000000000000000002c2fda00000000000000000000000000000000000000000000000000000000002c2fc70000000000000000000000000000000000000000000000000000000000368c8900000000000000000000000000000000000000000000000000000000002b532e00000000000000000000000000000000000000000000000000000000002c17ae00000000000000000000000000000000000000000000000000000000002aad6800000000000000000000000000000000000000000000000000000000002c2fce00000000000000000000000000000000000000000000000000000000002c2fd700000000000000000000000000000000000000000000000000000000002c33ad00000000000000000000000000000000000000000000000000000000002b5bb500000000000000000000000000000000000000000000000000000000002c33b600000000000000000000000000000000000000000000000000000000002c2fc000000000000000000000000000000000000000000000000000000000002c2fbf00000000000000000000000000000000000000000000000000000000002c10080000000000000000000000000000000000000000000000000000000000368c8300000000000000000000000000000000000000000000000000000000002b5bad0000000000000000000000000000000000000000000000000000000000368c7a0000000000000000000000000000000000000000000000000000000000368c8500000000000000000000000000000000000000000000000000000000002b5bae00000000000000000000000000000000000000000000000000000000001f76b900000000000000000000000000000000000000000000000000000000002c2fdb00000000000000000000000000000000000000000000000000000000002c33b70000000000000000000000000000000000000000000000000000000000368c8f0000000000000000000000000000000000000000000000000000000000368cdc0000000000000000000000000000000000000000000000000000000000368c8c0000000000000000000000000000000000000000000000000000000000368cbf0000000000000000000000000000000000000000000000000000000000368ca50000000000000000000000000000000000000000000000000000000000368c9c0000000000000000000000000000000000000000000000000000000000368c9d0000000000000000000000000000000000000000000000000000000000368cc70000000000000000000000000000000000000000000000000000000000368c920000000000000000000000000000000000000000000000000000000000368c910000000000000000000000000000000000000000000000000000000000368c980000000000000000000000000000000000000000000000000000000000368c930000000000000000000000000000000000000000000000000000000000368c940000000000000000000000000000000000000000000000000000000000368cea0000000000000000000000000000000000000000000000000000000000368cca0000000000000000000000000000000000000000000000000000000000368cb20000000000000000000000000000000000000000000000000000000000368cbb0000000000000000000000000000000000000000000000000000000000368cb80000000000000000000000000000000000000000000000000000000000368ca90000000000000000000000000000000000000000000000000000000000368cad0000000000000000000000000000000000000000000000000000000000368cae0000000000000000000000000000000000000000000000000000000000368d350000000000000000000000000000000000000000000000000000000000368cf40000000000000000000000000000000000000000000000000000000000368cdb0000000000000000000000000000000000000000000000000000000000368cc50000000000000000000000000000000000000000000000000000000000368cd10000000000000000000000000000000000000000000000000000000000368cd00000000000000000000000000000000000000000000000000000000000368cbd0000000000000000000000000000000000000000000000000000000000368cb50000000000000000000000000000000000000000000000000000000000368cd40000000000000000000000000000000000000000000000000000000000368d3f0000000000000000000000000000000000000000000000000000000000368ce40000000000000000000000000000000000000000000000000000000000368cc30000000000000000000000000000000000000000000000000000000000368cf50000000000000000000000000000000000000000000000000000000000368d340000000000000000000000000000000000000000000000000000000000368cf30000000000000000000000000000000000000000000000000000000000368d3c0000000000000000000000000000000000000000000000000000000000368d3b0000000000000000000000000000000000000000000000000000000000368ca30000000000000000000000000000000000000000000000000000000000368cd70000000000000000000000000000000000000000000000000000000000368d430000000000000000000000000000000000000000000000000000000000368d4e0000000000000000000000000000000000000000000000000000000000368d830000000000000000000000000000000000000000000000000000000000368d8e0000000000000000000000000000000000000000000000000000000000368d930000000000000000000000000000000000000000000000000000000000368d810000000000000000000000000000000000000000000000000000000000368d550000000000000000000000000000000000000000000000000000000000368d620000000000000000000000000000000000000000000000000000000000368d8b0000000000000000000000000000000000000000000000000000000000368d820000000000000000000000000000000000000000000000000000000000368d5e0000000000000000000000000000000000000000000000000000000000368d8c0000000000000000000000000000000000000000000000000000000000368d6b0000000000000000000000000000000000000000000000000000000000368d720000000000000000000000000000000000000000000000000000000000368d7b0000000000000000000000000000000000000000000000000000000000368d540000000000000000000000000000000000000000000000000000000000368d630000000000000000000000000000000000000000000000000000000000368d660000000000000000000000000000000000000000000000000000000000368d4c0000000000000000000000000000000000000000000000000000000000368d470000000000000000000000000000000000000000000000000000000000368d8d0000000000000000000000000000000000000000000000000000000000368d7c0000000000000000000000000000000000000000000000000000000000368d6a0000000000000000000000000000000000000000000000000000000000368deb0000000000000000000000000000000000000000000000000000000000368d9d0000000000000000000000000000000000000000000000000000000000368df00000000000000000000000000000000000000000000000000000000000368d970000000000000000000000000000000000000000000000000000000000368da00000000000000000000000000000000000000000000000000000000000368df20000000000000000000000000000000000000000000000000000000000368d9e0000000000000000000000000000000000000000000000000000000000368d580000000000000000000000000000000000000000000000000000000000368da40000000000000000000000000000000000000000000000000000000000368dec0000000000000000000000000000000000000000000000000000000000368de70000000000000000000000000000000000000000000000000000000000368e170000000000000000000000000000000000000000000000000000000000368df10000000000000000000000000000000000000000000000000000000000368d9f0000000000000000000000000000000000000000000000000000000000368e1c0000000000000000000000000000000000000000000000000000000000368e210000000000000000000000000000000000000000000000000000000000368e1f0000000000000000000000000000000000000000000000000000000000368e2a0000000000000000000000000000000000000000000000000000000000368e250000000000000000000000000000000000000000000000000000000000368e5f0000000000000000000000000000000000000000000000000000000000368e4d0000000000000000000000000000000000000000000000000000000000368e270000000000000000000000000000000000000000000000000000000000368e2e0000000000000000000000000000000000000000000000000000000000368e330000000000000000000000000000000000000000000000000000000000368e2d0000000000000000000000000000000000000000000000000000000000368e490000000000000000000000000000000000000000000000000000000000368e420000000000000000000000000000000000000000000000000000000000368e440000000000000000000000000000000000000000000000000000000000368e540000000000000000000000000000000000000000000000000000000000368e450000000000000000000000000000000000000000000000000000000000368e3b0000000000000000000000000000000000000000000000000000000000368e5b0000000000000000000000000000000000000000000000000000000000368e400000000000000000000000000000000000000000000000000000000000368e4f0000000000000000000000000000000000000000000000000000000000368e500000000000000000000000000000000000000000000000000000000000368e360000000000000000000000000000000000000000000000000000000000368e480000000000000000000000000000000000000000000000000000000000368e4e0000000000000000000000000000000000000000000000000000000000368e4c0000000000000000000000000000000000000000000000000000000000368e5a0000000000000000000000000000000000000000000000000000000000368e520000000000000000000000000000000000000000000000000000000000368e610000000000000000000000000000000000000000000000000000000000368e510000000000000000000000000000000000000000000000000000000000368e550000000000000000000000000000000000000000000000000000000000368e790000000000000000000000000000000000000000000000000000000000368e410000000000000000000000000000000000000000000000000000000000368e590000000000000000000000000000000000000000000000000000000000368e370000000000000000000000000000000000000000000000000000000000368e710000000000000000000000000000000000000000000000000000000000368ea70000000000000000000000000000000000000000000000000000000000368ead0000000000000000000000000000000000000000000000000000000000368e720000000000000000000000000000000000000000000000000000000000368e620000000000000000000000000000000000000000000000000000000000368e680000000000000000000000000000000000000000000000000000000000368e6b0000000000000000000000000000000000000000000000000000000000368e7c0000000000000000000000000000000000000000000000000000000000368eae0000000000000000000000000000000000000000000000000000000000368eba0000000000000000000000000000000000000000000000000000000000368ec60000000000000000000000000000000000000000000000000000000000368eb60000000000000000000000000000000000000000000000000000000000368ed00000000000000000000000000000000000000000000000000000000000368eb40000000000000000000000000000000000000000000000000000000000368ec20000000000000000000000000000000000000000000000000000000000368ebb0000000000000000000000000000000000000000000000000000000000368eb50000000000000000000000000000000000000000000000000000000000368ebf0000000000000000000000000000000000000000000000000000000000368ed50000000000000000000000000000000000000000000000000000000000368ec30000000000000000000000000000000000000000000000000000000000368ee60000000000000000000000000000000000000000000000000000000000368ebe0000000000000000000000000000000000000000000000000000000000368ecb0000000000000000000000000000000000000000000000000000000000368ecf0000000000000000000000000000000000000000000000000000000000368ed60000000000000000000000000000000000000000000000000000000000368ede0000000000000000000000000000000000000000000000000000000000368ef20000000000000000000000000000000000000000000000000000000000368edf0000000000000000000000000000000000000000000000000000000000368eea0000000000000000000000000000000000000000000000000000000000368eee0000000000000000000000000000000000000000000000000000000000368ee30000000000000000000000000000000000000000000000000000000000368eef0000000000000000000000000000000000000000000000000000000000368efd0000000000000000000000000000000000000000000000000000000000368f010000000000000000000000000000000000000000000000000000000000368efa0000000000000000000000000000000000000000000000000000000000368efb0000000000000000000000000000000000000000000000000000000000368ef60000000000000000000000000000000000000000000000000000000000368f060000000000000000000000000000000000000000000000000000000000368f0c0000000000000000000000000000000000000000000000000000000000368f020000000000000000000000000000000000000000000000000000000000368f0d0000000000000000000000000000000000000000000000000000000000368f540000000000000000000000000000000000000000000000000000000000368f110000000000000000000000000000000000000000000000000000000000368f140000000000000000000000000000000000000000000000000000000000368f120000000000000000000000000000000000000000000000000000000000368f1b0000000000000000000000000000000000000000000000000000000000368f1c0000000000000000000000000000000000000000000000000000000000368f1d0000000000000000000000000000000000000000000000000000000000368f560000000000000000000000000000000000000000000000000000000000368f6d0000000000000000000000000000000000000000000000000000000000368f650000000000000000000000000000000000000000000000000000000000368f620000000000000000000000000000000000000000000000000000000000368f5a0000000000000000000000000000000000000000000000000000000000368f680000000000000000000000000000000000000000000000000000000000368f6b0000000000000000000000000000000000000000000000000000000000368f690000000000000000000000000000000000000000000000000000000000368f640000000000000000000000000000000000000000000000000000000000368f630000000000000000000000000000000000000000000000000000000000368f660000000000000000000000000000000000000000000000000000000000368f720000000000000000000000000000000000000000000000000000000000368f710000000000000000000000000000000000000000000000000000000000368f5e0000000000000000000000000000000000000000000000000000000000368f800000000000000000000000000000000000000000000000000000000000368f6c0000000000000000000000000000000000000000000000000000000000368f6a0000000000000000000000000000000000000000000000000000000000368f700000000000000000000000000000000000000000000000000000000000368f7b0000000000000000000000000000000000000000000000000000000000368f880000000000000000000000000000000000000000000000000000000000368f730000000000000000000000000000000000000000000000000000000000368f5f0000000000000000000000000000000000000000000000000000000000368f760000000000000000000000000000000000000000000000000000000000368f820000000000000000000000000000000000000000000000000000000000368f770000000000000000000000000000000000000000000000000000000000368f7a0000000000000000000000000000000000000000000000000000000000368f7f0000000000000000000000000000000000000000000000000000000000368f7c0000000000000000000000000000000000000000000000000000000000368f960000000000000000000000000000000000000000000000000000000000368f990000000000000000000000000000000000000000000000000000000000368f870000000000000000000000000000000000000000000000000000000000368f860000000000000000000000000000000000000000000000000000000000368f970000000000000000000000000000000000000000000000000000000000368fa20000000000000000000000000000000000000000000000000000000000368f980000000000000000000000000000000000000000000000000000000000368f9a0000000000000000000000000000000000000000000000000000000000368faa0000000000000000000000000000000000000000000000000000000000368fa00000000000000000000000000000000000000000000000000000000000368fa10000000000000000000000000000000000000000000000000000000000368fa70000000000000000000000000000000000000000000000000000000000368fbb0000000000000000000000000000000000000000000000000000000000368fc10000000000000000000000000000000000000000000000000000000000368fbe0000000000000000000000000000000000000000000000000000000000368ff30000000000000000000000000000000000000000000000000000000000368fce0000000000000000000000000000000000000000000000000000000000368fd50000000000000000000000000000000000000000000000000000000000368fe30000000000000000000000000000000000000000000000000000000000368fc80000000000000000000000000000000000000000000000000000000000368fd40000000000000000000000000000000000000000000000000000000000368ffa0000000000000000000000000000000000000000000000000000000000368ff4"
    },
    {
      "to": "0x3B8d1f9569ec2B8C3dD76847B944bB1b0c998A38",
      "value": "60338685015750000",
      "input": "0x3a0916500000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000003b0000000000000000000000000000000000000000000000000000000000368fc20000000000000000000000000000000000000000000000000000000000368fdb0000000000000000000000000000000000000000000000000000000000368fcc0000000000000000000000000000000000000000000000000000000000368fcd0000000000000000000000000000000000000000000000000000000000368ff500000000000000000000000000000000000000000000000000000000003690020000000000000000000000000000000000000000000000000000000000368ffb0000000000000000000000000000000000000000000000000000000000368fd600000000000000000000000000000000000000000000000000000000003690010000000000000000000000000000000000000000000000000000000000368ffc0000000000000000000000000000000000000000000000000000000000368fed0000000000000000000000000000000000000000000000000000000000368ff70000000000000000000000000000000000000000000000000000000000369000000000000000000000000000000000000000000000000000000000000036900400000000000000000000000000000000000000000000000000000000003690100000000000000000000000000000000000000000000000000000000000369005000000000000000000000000000000000000000000000000000000000036901100000000000000000000000000000000000000000000000000000000003690060000000000000000000000000000000000000000000000000000000000369012000000000000000000000000000000000000000000000000000000000036901a0000000000000000000000000000000000000000000000000000000000369020000000000000000000000000000000000000000000000000000000000036901b00000000000000000000000000000000000000000000000000000000003690260000000000000000000000000000000000000000000000000000000000369021000000000000000000000000000000000000000000000000000000000036902b0000000000000000000000000000000000000000000000000000000000369025000000000000000000000000000000000000000000000000000000000036902a000000000000000000000000000000000000000000000000000000000036901f0000000000000000000000000000000000000000000000000000000000369038000000000000000000000000000000000000000000000000000000000036903000000000000000000000000000000000000000000000000000000000003690600000000000000000000000000000000000000000000000000000000000369056000000000000000000000000000000000000000000000000000000000036906a000000000000000000000000000000000000000000000000000000000036905d000000000000000000000000000000000000000000000000000000000036906b00000000000000000000000000000000000000000000000000000000003690880000000000000000000000000000000000000000000000000000000000369078000000000000000000000000000000000000000000000000000000000036906500000000000000000000000000000000000000000000000000000000003690640000000000000000000000000000000000000000000000000000000000369072000000000000000000000000000000000000000000000000000000000036906300000000000000000000000000000000000000000000000000000000003690800000000000000000000000000000000000000000000000000000000000369073000000000000000000000000000000000000000000000000000000000036908700000000000000000000000000000000000000000000000000000000003d113700000000000000000000000000000000000000000000000000000000003d113b00000000000000000000000000000000000000000000000000000000003d113800000000000000000000000000000000000000000000000000000000003d113500000000000000000000000000000000000000000000000000000000003d113e0000000000000000000000000000000000000000000000000000000000369082000000000000000000000000000000000000000000000000000000000036908900000000000000000000000000000000000000000000000000000000003d113900000000000000000000000000000000000000000000000000000000003d113c000000000000000000000000000000000000000000000000000000000036908e00000000000000000000000000000000000000000000000000000000003d113d00000000000000000000000000000000000000000000000000000000003d113400000000000000000000000000000000000000000000000000000000003d113600000000000000000000000000000000000000000000000000000000003d5ea500000000000000000000000000000000000000000000000000000000003d56b1"
    }
  ],
  "success": true
}
```